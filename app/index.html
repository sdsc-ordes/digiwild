<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gradio GPS Location</title>
</head>
<body>
    <h1>Gradio GPS Location Example</h1>
    <div id="gradio-interface">
        <iframe src="http://127.0.0.1:7860/" width="100%" height="500px" frameborder="0" id="gradio-iframe"></iframe>
    </div>

    <script>
        // Function to get the user's location
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }

        // Function to handle the position data
        function showPosition(position) {
            const latitude = position.coords.latitude;
            const longitude = position.coords.longitude;
            
            // Post the latitude and longitude to the Gradio iframe
            const iframe = document.getElementById('gradio-iframe');
            iframe.contentWindow.postMessage({ latitude: latitude, longitude: longitude }, '*');
        }

        // Function to handle button click and get location
        function handleButtonClick() {
            getLocation();
        }

        // Run the getLocation function when the page loads
        window.onload = function() {
            const iframe = document.getElementById('gradio-iframe');
            iframe.onload = function() {
                iframe.contentWindow.addEventListener('message', function(event) {
                    if (event.data === 'button_clicked') {
                        handleButtonClick();
                    }
                    if (event.data.latitude && event.data.longitude) {
                        iframe.contentWindow.postMessage(`Latitude: ${event.data.latitude}, Longitude: ${event.data.longitude}`, '*');
                    }
                });
            };
        };

        // Listen for messages from the iframe (optional, if you need to handle responses)
        window.addEventListener('message', function(event) {
            console.log('Received message from Gradio:', event.data);
        }, false);
    </script>
</body>
</html>



<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gradio GPS Location</title>
</head>
<body>
    <h1>Gradio GPS Location Example</h1>
    <div id="gradio-interface">
        <iframe src="http://127.0.0.1:7860/" width="100%" height="500px" frameborder="0" id="gradio-iframe"></iframe>
    </div>

    <script>
        // Function to get the user's location
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }

        // Function to handle the position data
        function showPosition(position) {
            const latitude = position.coords.latitude;
            const longitude = position.coords.longitude;
            
            // Post the latitude and longitude to the Gradio iframe
            const iframe = document.getElementById('gradio-iframe');
            iframe.contentWindow.postMessage({ latitude: latitude, longitude: longitude }, '*');
        }

        // Run the getLocation function when the page loads
        window.onload = function() {
            getLocation();
        };

        // Listen for messages from the iframe (optional, if you need to handle responses)
        window.addEventListener('message', function(event) {
            console.log('Received message from Gradio:', event.data);
        }, false);
    </script>
</body>
</html> -->
